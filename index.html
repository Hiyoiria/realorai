<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visual Data Analysis - RealOrAI</title>
    <!-- Â≠ó‰Ωì -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- ECharts -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        bg: '#F6F6F2',
                        panel: '#FFFFFF',
                        primary: '#567C4D',
                        ai: '#D9534F',
                        human: '#5BC0DE',
                        unsure: '#F0AD4E',
                        text: '#333333',
                        border: '#E0E0E0'
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #F6F6F2; color: #333; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }
        
        /* Analysis Styles */
        .blur-text-reveal {
            position: relative;
            overflow: hidden;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .blur-text-reveal::after {
            content: '';
            position: absolute;
            inset: 0;
            background: rgba(255,255,255,0.4);
            backdrop-filter: blur(4px);
            transition: opacity 0.3s;
        }
        .blur-text-reveal:hover::after { opacity: 0; }
        
        /* Animation & Interaction */
        .annotation-box {
            position: absolute;
            border: 2px solid;
            border-radius: 50%;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            pointer-events: none;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
        }
        .annotation-box.active { opacity: 1; transform: scale(1); }
        .comment-item { transition: all 0.3s; opacity: 0.5; transform: translateX(-10px); }
        .comment-item.active { opacity: 1; transform: translateX(0); background: #FFF; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }

        .vis-point {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
            cursor: pointer;
            z-index: 10;
            transition: transform 0.2s;
        }
        .vis-point:hover { transform: scale(1.5); }
        .vis-line {
            position: absolute;
            height: 1px;
            background: rgba(0,0,0,0.3);
            transform-origin: left center;
            z-index: 1;
            pointer-events: none;
        }
        .vis-card {
            position: absolute;
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(8px);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 5;
            min-width: 120px;
        }

        /* GAME STYLES */
        .target-image { transition: filter 0.6s cubic-bezier(0.4, 0, 0.2, 1); }
        .blur-state { filter: blur(12px) brightness(0.9); }
        .donut-wrapper {
            opacity: 0; transform: scale(0.9);
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .show-overlay .donut-wrapper { opacity: 1; transform: scale(1); }
        .panel-fade-in { animation: fadeInPanel 0.4s ease-out forwards; }
        @keyframes fadeInPanel {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">

    <!-- HEADER -->
    <header class="h-16 bg-bg border-b-2 border-[#E6E6E1] flex items-center justify-between px-6 shrink-0 z-50">
        <div class="flex items-center gap-3">
            <span class="bg-primary text-white text-[10px] font-bold px-2 py-1 tracking-wider uppercase rounded-sm">SYS_ONLINE</span>
            <div class="flex flex-col leading-none">
                <span class="text-xl font-extrabold tracking-tight text-text">r/RealOrAI</span>
                <span class="text-[10px] text-secondary uppercase tracking-widest mt-0.5">Visual Data Analysis System</span>
            </div>
        </div>
        <nav class="flex gap-2">
            <button onclick="switchView('analysis')" id="btn-nav-analysis" class="px-4 py-1.5 text-xs font-semibold text-white bg-primary rounded shadow-sm transition-colors">ANALYSIS DASHBOARD</button>
            <button onclick="switchView('game')" id="btn-nav-game" class="px-4 py-1.5 text-xs font-semibold text-secondary hover:text-primary transition-colors hover:bg-white rounded">GAME PREVIEW</button>
        </nav>
    </header>

    <!-- MAIN CONTAINER -->
    <main class="flex-1 relative overflow-hidden">
        
        <!-- === VIEW 1: ANALYSIS DASHBOARD === -->
        <div id="view-analysis" class="absolute inset-0 overflow-y-auto scroll-smooth">
            <div class="max-w-5xl mx-auto p-8 space-y-16 pb-32">
                
                <!-- SECTION 1: OVERALL VIEW -->
                <section>
                    <div class="border-l-4 border-primary pl-4 mb-8">
                        <h1 class="text-2xl font-bold text-gray-800">‰∏Ä„ÄÅOverall View (Global Statistics)</h1>
                        <p class="text-sm text-gray-500 mt-1">Data Source: All 920 Posts | Scope: Global Trends</p>
                    </div>

                    <!-- 1.1 Post Simulation -->
                    <div class="mb-12">
                        <h2 class="text-sm font-bold text-gray-400 uppercase tracking-wider mb-4">1.1 Discourse Simulation: How Users Argue</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-0 border border-border rounded-lg overflow-hidden bg-white shadow-sm h-[450px]">
                            <!-- Left: Image Canvas -->
                            <div class="relative bg-gray-100 flex items-center justify-center overflow-hidden group">
                                <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=988&auto=format&fit=crop" class="w-full h-full object-cover opacity-90">
                                
                                <!-- Dynamic Annotations -->
                                <div id="anno-hand" class="annotation-box border-red-500" style="top: 65%; left: 30%; width: 15%; height: 15%;">
                                    <span class="absolute -top-6 left-1/2 -translate-x-1/2 bg-red-500 text-white text-[10px] px-2 py-0.5 rounded whitespace-nowrap">Fingers (Anomaly)</span>
                                </div>
                                <div id="anno-light" class="annotation-box border-blue-500" style="top: 20%; left: 60%; width: 20%; height: 20%;">
                                    <span class="absolute -top-6 left-1/2 -translate-x-1/2 bg-blue-500 text-white text-[10px] px-2 py-0.5 rounded whitespace-nowrap">Lighting (Natural)</span>
                                </div>
                                
                                <div class="absolute bottom-4 left-4 bg-black/60 text-white text-xs px-3 py-1 rounded-full backdrop-blur-sm">
                                    Ê®°Êãü Reddit Â∏ñÂ≠êËßÜÂõæ
                                </div>
                            </div>

                            <!-- Right: Comment Stream -->
                            <div class="bg-gray-50 p-6 flex flex-col border-l border-border relative">
                                <div class="flex items-center gap-3 mb-6 pb-4 border-b border-gray-200">
                                    <div class="w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center text-white font-bold">r/</div>
                                    <div>
                                        <div class="font-bold text-sm">[HELP] Is this portrait AI? Hands look weird.</div>
                                        <div class="text-[10px] text-gray-400">u/user123 ‚Ä¢ 5 hours ago</div>
                                    </div>
                                </div>

                                <div class="flex-1 overflow-y-auto space-y-4 no-scrollbar pr-2" id="comment-stream">
                                    <div class="comment-item p-3 rounded border border-transparent hover:border-gray-200" onmouseover="highlight('anno-hand')" onmouseout="unhighlight('anno-hand')">
                                        <div class="flex justify-between items-center mb-1">
                                            <span class="text-xs font-bold text-gray-600">u/pixel_peeper</span>
                                            <span class="text-[10px] text-ai bg-red-50 px-1.5 py-0.5 rounded font-bold border border-red-100">FOR AI</span>
                                        </div>
                                        <p class="text-sm text-gray-700">The <span class="text-red-600 font-medium border-b border-red-300">fingers</span> are bending backwards. Anatomically impossible.</p>
                                    </div>

                                    <div class="comment-item p-3 rounded border border-transparent hover:border-gray-200" onmouseover="highlight('anno-light')" onmouseout="unhighlight('anno-light')">
                                        <div class="flex justify-between items-center mb-1">
                                            <span class="text-xs font-bold text-gray-600">u/light_master</span>
                                            <span class="text-[10px] text-human bg-blue-50 px-1.5 py-0.5 rounded font-bold border border-blue-100">FOR HUMAN</span>
                                        </div>
                                        <p class="text-sm text-gray-700">Look at the <span class="text-blue-600 font-medium border-b border-blue-300">shadows</span> on the hair. The lighting fall-off is too consistent for v6.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 1.2 Verdict Distribution -->
                    <div class="mb-12">
                        <h2 class="text-sm font-bold text-gray-400 uppercase tracking-wider mb-4">1.2 Verdict Distribution (Based on Bot)</h2>
                        <div class="glass-panel p-6 rounded-lg grid grid-cols-1 md:grid-cols-3 gap-8 items-center">
                            <div class="text-center md:text-left">
                                <div class="text-5xl font-extrabold text-text mb-1">920</div>
                                <div class="text-sm text-gray-500 font-medium uppercase tracking-wide">Total Posts</div>
                            </div>
                            <div class="col-span-2">
                                <div id="chart-verdict" style="width: 100%; height: 80px;"></div>
                            </div>
                        </div>
                    </div>

                    <!-- 1.3 Descriptive Stats -->
                    <div class="mb-12">
                        <h2 class="text-sm font-bold text-gray-400 uppercase tracking-wider mb-4">1.3 Descriptive Statistics</h2>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-white p-5 rounded-lg border border-border shadow-sm">
                                <h3 class="text-xs font-bold text-gray-500 mb-4">POSTING TIME DISTRIBUTION (UTC)</h3>
                                <div id="chart-time" style="width: 100%; height: 250px;"></div>
                            </div>
                            <div class="bg-white p-5 rounded-lg border border-border shadow-sm relative">
                                <div class="absolute top-4 right-4 z-10">
                                    <span class="flex items-center gap-1 text-[10px] bg-red-50 text-ai px-2 py-1 rounded border border-red-100">
                                        <span class="w-1.5 h-1.5 rounded-full bg-ai"></span> High Controversy
                                    </span>
                                </div>
                                <h3 class="text-xs font-bold text-gray-500 mb-4">ENGAGEMENT CROSS-ANALYSIS</h3>
                                <div id="chart-scatter" style="width: 100%; height: 250px;"></div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-primary/5 border border-primary/20 p-4 rounded-lg text-sm text-gray-700 leading-relaxed">
                        <strong>ÊÄªÁªìÁªìËÆ∫Ôºö</strong>
                        ÂÖ±ÂàÜÊûê 920 Êù°Â∏ñÂ≠ê„ÄÇÂÖ∂‰∏≠ AI Âà§ÂÆöÂç†ÊØî <strong>38.7%</strong>ÔºåReal Âç†ÊØî 24.9%„ÄÇ
                        Êï∞ÊçÆË°®Êòé AI ÂÜÖÂÆπÊõ¥ÂÆπÊòìÂºïÂèëÈ´òÂº∫Â∫¶ÁöÑÁ§æÂå∫ËÆ®ËÆ∫„ÄÇÂèëÂ∏ñÈ´òÂ≥∞ÈõÜ‰∏≠Âú® 19:00 UTC„ÄÇ
                    </div>
                </section>

                <!-- DIVIDER -->
                <div class="border-t-2 border-dashed border-gray-300"></div>

                <!-- SECTION 2: DETAILED ANALYSIS -->
                <section>
                    <div class="border-l-4 border-human pl-4 mb-8">
                        <h1 class="text-2xl font-bold text-gray-800">‰∫å„ÄÅDetailed Rationale Analysis</h1>
                        <p class="text-sm text-gray-500 mt-1">Data Source: 79 Valid Posts | Scope: Deep Dive</p>
                    </div>

                    <!-- 2.1 Gallery & Word Cloud -->
                    <div class="mb-16">
                        <h2 class="text-sm font-bold text-gray-400 uppercase tracking-wider mb-4">2.1 What images are discussed?</h2>
                        <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 h-[350px]">
                            <div class="lg:col-span-7 flex gap-4 overflow-x-auto pb-2 no-scrollbar snap-x">
                                <!-- Cards -->
                                <div class="min-w-[200px] h-full relative rounded-lg overflow-hidden group snap-center border border-border shadow-sm">
                                    <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=400" class="w-full h-full object-cover">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-100"></div>
                                    <div class="absolute bottom-3 left-3 right-3 text-white">
                                        <div class="flex gap-1 mb-2">
                                            <span class="text-[10px] bg-white/20 px-1.5 py-0.5 rounded backdrop-blur-sm">#Person</span>
                                            <span class="text-[10px] bg-white/20 px-1.5 py-0.5 rounded backdrop-blur-sm">#Portrait</span>
                                        </div>
                                        <span class="inline-block w-2 h-2 rounded-full bg-ai mr-1"></span> <span class="text-xs font-bold">AI Verdict</span>
                                    </div>
                                </div>
                                <div class="min-w-[200px] h-full relative rounded-lg overflow-hidden group snap-center border border-border shadow-sm">
                                    <img src="https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?q=80&w=400" class="w-full h-full object-cover">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-100"></div>
                                    <div class="absolute bottom-3 left-3 right-3 text-white">
                                        <div class="flex gap-1 mb-2">
                                            <span class="text-[10px] bg-white/20 px-1.5 py-0.5 rounded backdrop-blur-sm">#Cat</span>
                                            <span class="text-[10px] bg-white/20 px-1.5 py-0.5 rounded backdrop-blur-sm">#Indoor</span>
                                        </div>
                                        <span class="inline-block w-2 h-2 rounded-full bg-ai mr-1"></span> <span class="text-xs font-bold">AI Verdict</span>
                                    </div>
                                </div>
                                <div class="min-w-[200px] h-full relative rounded-lg overflow-hidden group snap-center border border-border shadow-sm">
                                    <img src="https://images.unsplash.com/photo-1472214103451-9374bd1c7dd1?q=80&w=400" class="w-full h-full object-cover">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-100"></div>
                                    <div class="absolute bottom-3 left-3 right-3 text-white">
                                        <div class="flex gap-1 mb-2">
                                            <span class="text-[10px] bg-white/20 px-1.5 py-0.5 rounded backdrop-blur-sm">#Scene</span>
                                            <span class="text-[10px] bg-white/20 px-1.5 py-0.5 rounded backdrop-blur-sm">#Nature</span>
                                        </div>
                                        <span class="inline-block w-2 h-2 rounded-full bg-human mr-1"></span> <span class="text-xs font-bold">Real Verdict</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Word Cloud -->
                            <div class="lg:col-span-5 bg-white border border-border rounded-lg shadow-sm p-4 relative overflow-hidden">
                                <h3 class="absolute top-3 left-4 text-xs font-bold text-gray-400 z-10">HOT ENTITIES</h3>
                                <div id="chart-wordcloud" style="width: 100%; height: 100%;"></div>
                            </div>
                        </div>
                    </div>

                    <!-- 2.2 Argumentation Methods -->
                    <div class="mb-16">
                        <h2 class="text-sm font-bold text-gray-400 uppercase tracking-wider mb-6">2.2 Argumentation Strategies</h2>

                        <!-- 2.2.0 Strategy Cards -->
                        <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3 mb-10">
                            <div class="bg-white p-3 rounded border border-border hover:border-primary transition-colors cursor-default group">
                                <div class="w-8 h-8 rounded bg-blue-50 text-blue-500 flex items-center justify-center mb-2 text-lg">üß¨</div>
                                <div class="font-bold text-[10px] uppercase text-gray-600 mb-1">Anatomy</div>
                                <div class="text-[10px] text-gray-400 leading-tight">Biologically impossible structures.</div>
                            </div>
                            <div class="bg-white p-3 rounded border border-border hover:border-primary transition-colors cursor-default group">
                                <div class="w-8 h-8 rounded bg-green-50 text-green-500 flex items-center justify-center mb-2 text-lg">üîç</div>
                                <div class="font-bold text-[10px] uppercase text-gray-600 mb-1">Details</div>
                                <div class="text-[10px] text-gray-400 leading-tight">Object consistency & integrity.</div>
                            </div>
                            <div class="bg-white p-3 rounded border border-border hover:border-primary transition-colors cursor-default group">
                                <div class="w-8 h-8 rounded bg-yellow-50 text-yellow-500 flex items-center justify-center mb-2 text-lg">üé®</div>
                                <div class="font-bold text-[10px] uppercase text-gray-600 mb-1">Style</div>
                                <div class="text-[10px] text-gray-400 leading-tight">Visual texture & aesthetics.</div>
                            </div>
                            <!-- More cards... -->
                             <div class="bg-white p-3 rounded border border-border hover:border-primary transition-colors cursor-default group">
                                <div class="w-8 h-8 rounded bg-red-50 text-red-500 flex items-center justify-center mb-2 text-lg">üìö</div>
                                <div class="font-bold text-[10px] uppercase text-gray-600 mb-1">Knowledge</div>
                                <div class="text-[10px] text-gray-400 leading-tight">External comparison.</div>
                            </div>
                        </div>

                        <!-- 2.2.1 Radar Chart -->
                        <div class="mb-12">
                            <div class="glass-panel p-6 rounded-lg relative">
                                <h3 class="absolute top-4 left-6 text-xs font-bold text-gray-500 uppercase">Strategy Distribution (AI vs Real)</h3>
                                <div id="chart-radar" style="width: 100%; height: 400px;"></div>
                            </div>
                        </div>

                        <!-- 2.2.2 & 2.2.3 Flow Analysis -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
                            <div class="bg-white p-5 rounded-lg border border-border shadow-sm">
                                <h3 class="text-xs font-bold text-gray-500 mb-4 uppercase">Top Strategies by Verdict (Bar)</h3>
                                <div id="chart-bar-stacked" style="width: 100%; height: 300px;"></div>
                            </div>
                            <div class="bg-white p-5 rounded-lg border border-border shadow-sm">
                                <h3 class="text-xs font-bold text-gray-500 mb-4 uppercase">Entity ‚Üí Descriptor Flow</h3>
                                <div id="chart-sankey" style="width: 100%; height: 300px;"></div>
                            </div>
                        </div>

                        <!-- 2.2.4 Visual Examples -->
                        <div class="mb-12">
                            <h2 class="text-sm font-bold text-gray-400 uppercase tracking-wider mb-4">2.2.4 Specific Visual Analysis</h2>
                            
                            <div class="flex gap-2 mb-4">
                                <button onclick="switchVisual('person')" class="vis-tab active px-4 py-2 bg-white border border-gray-300 rounded text-xs font-bold hover:bg-gray-50 data-[active=true]:bg-primary data-[active=true]:text-white data-[active=true]:border-primary" data-active="true" id="tab-person">PERSON</button>
                                <button onclick="switchVisual('cat')" class="vis-tab px-4 py-2 bg-white border border-gray-300 rounded text-xs font-bold hover:bg-gray-50 data-[active=true]:bg-primary data-[active=true]:text-white data-[active=true]:border-primary" id="tab-cat">CAT</button>
                                <button onclick="switchVisual('room')" class="vis-tab px-4 py-2 bg-white border border-gray-300 rounded text-xs font-bold hover:bg-gray-50 data-[active=true]:bg-primary data-[active=true]:text-white data-[active=true]:border-primary" id="tab-room">ROOM</button>
                            </div>

                            <div class="relative w-full h-[500px] bg-gray-100 rounded-lg overflow-hidden border border-border shadow-inner group">
                                <div id="vis-person" class="vis-content absolute inset-0 transition-opacity duration-500">
                                    <img src="https://images.unsplash.com/photo-1534528741775-53994a69daeb?q=80&w=1000" class="w-full h-full object-cover opacity-80">
                                    <div class="vis-point bg-ai/90 border-ai" style="top: 35%; left: 48%;" onmouseenter="showCard('card-p-eye')" onmouseleave="hideCard('card-p-eye')"></div>
                                    <div class="vis-line" style="top: 35%; left: 48%; width: 100px; transform: rotate(-20deg);"></div>
                                    <div id="card-p-eye" class="vis-card hidden" style="top: 25%; left: 58%;">
                                        <div class="font-bold text-ai mb-1">Entity: Eyes</div>
                                        <div class="blur-text-reveal text-gray-600 font-mono text-[10px]">Descriptor: Asymmetrical Pupils</div>
                                    </div>
                                    <div class="vis-point bg-ai/90 border-ai" style="top: 80%; left: 30%; width: 20px; height: 20px;" onmouseenter="showCard('card-p-hand')" onmouseleave="hideCard('card-p-hand')"></div>
                                    <div class="vis-line" style="top: 80%; left: 30%; width: 80px; transform: rotate(180deg);"></div>
                                    <div id="card-p-hand" class="vis-card hidden" style="top: 75%; left: 15%;">
                                        <div class="font-bold text-ai mb-1">Entity: Fingers</div>
                                        <div class="blur-text-reveal text-gray-600 font-mono text-[10px]">Descriptor: Quantity Anomaly</div>
                                    </div>
                                </div>
                                <div id="vis-cat" class="vis-content absolute inset-0 transition-opacity duration-500 opacity-0 pointer-events-none">
                                    <img src="https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?q=80&w=1000" class="w-full h-full object-cover opacity-80">
                                    <div class="vis-point bg-human/90 border-human" style="top: 50%; left: 50%;" onmouseenter="showCard('card-c-fur')" onmouseleave="hideCard('card-c-fur')"></div>
                                    <div id="card-c-fur" class="vis-card hidden" style="top: 40%; left: 55%;">
                                        <div class="font-bold text-human mb-1">Entity: Texture</div>
                                        <div class="blur-text-reveal text-gray-600 font-mono text-[10px]">Descriptor: Natural Irregularity</div>
                                    </div>
                                </div>
                                <div id="vis-room" class="vis-content absolute inset-0 transition-opacity duration-500 opacity-0 pointer-events-none">
                                    <img src="https://images.unsplash.com/photo-1513694203232-719a280e022f?q=80&w=1000" class="w-full h-full object-cover opacity-80">
                                    <div class="vis-point bg-ai/90 border-ai" style="top: 20%; left: 20%;" onmouseenter="showCard('card-r-pers')" onmouseleave="hideCard('card-r-pers')"></div>
                                    <div id="card-r-pers" class="vis-card hidden" style="top: 10%; left: 25%;">
                                        <div class="font-bold text-ai mb-1">Entity: Ceiling Line</div>
                                        <div class="blur-text-reveal text-gray-600 font-mono text-[10px]">Descriptor: Non-vanishing Point</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <!-- === VIEW 2: GAME PREVIEW === -->
        <div id="view-game" class="absolute inset-0 grid grid-cols-1 lg:grid-cols-[1fr_420px] gap-6 p-4 lg:p-6 hidden">
            <!-- LEFT: IMAGE PANEL -->
            <section class="relative bg-white border border-border shadow-sm rounded-lg overflow-hidden flex items-center justify-center group select-none">
                <!-- Source Badge -->
                <div id="source-badge" class="absolute top-4 right-4 z-20 hidden badge-enter">
                    <div class="flex items-center gap-2 bg-black/80 backdrop-blur-md text-white text-xs font-medium px-3 py-1.5 rounded-full shadow-lg">
                        <svg class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701z"/></svg>
                        <span>From r/midjourney</span>
                    </div>
                </div>

                <!-- Image -->
                <img id="main-image" src="" alt="Target" class="w-full h-full object-contain target-image" />

                <!-- Result Overlay (Donut) -->
                <div id="result-overlay" class="absolute inset-0 z-10 hidden flex-col items-center justify-center pointer-events-none">
                    <div class="donut-wrapper bg-white/95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl flex flex-col items-center text-center max-w-xs border border-white/50">
                        <div class="relative w-32 h-32 rounded-full mb-4" id="donut-chart">
                            <div class="absolute inset-4 bg-white rounded-full flex items-center justify-center shadow-inner">
                                <span id="donut-text" class="text-2xl font-bold text-text">AI</span>
                            </div>
                        </div>
                        <h3 id="overlay-title" class="text-lg font-bold text-text mb-1">AI Generated</h3>
                        <p id="overlay-subtitle" class="text-xs text-secondary font-medium uppercase tracking-wide">Community Verdict</p>
                        <div class="mt-4 text-xs text-secondary bg-gray-100 px-3 py-1.5 rounded-full">
                            You agreed with 85%
                        </div>
                    </div>
                </div>
            </section>

            <!-- RIGHT: INTERACTION PANEL -->
            <section class="flex flex-col bg-white border border-border shadow-sm rounded-lg overflow-hidden h-full">
                <div class="px-6 py-4 border-b border-border bg-gray-50/50 flex items-center justify-between shrink-0">
                    <div class="flex items-center gap-2">
                        <span class="bg-primary text-white text-[9px] px-1.5 py-0.5 rounded-sm">MOD_01</span>
                        <h2 class="text-xs font-bold text-gray-500 uppercase tracking-wider">Classification Protocol</h2>
                    </div>
                    <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                </div>

                <div id="interaction-content" class="flex-1 overflow-y-auto no-scrollbar p-6 relative"></div>

                <div id="bottom-nav" class="hidden p-4 border-t border-border bg-gray-50 gap-3 shrink-0 panel-fade-in">
                    <button onclick="switchView('analysis')" class="flex-1 py-3 px-4 bg-white border border-gray-300 rounded-md text-sm font-semibold text-gray-600 hover:bg-gray-50 transition-colors">Quit to Analysis</button>
                    <button onclick="nextImage()" class="flex-1 py-3 px-4 bg-primary text-white rounded-md text-sm font-semibold hover:bg-primary-dark transition-colors shadow-sm flex items-center justify-center gap-2">Next Image ‚Üí</button>
                </div>
            </section>
        </div>

        <!-- Dev Controls for Game -->
        <div id="dev-controls" class="fixed bottom-4 right-4 z-50 bg-gray-900/90 text-white p-3 rounded-lg shadow-2xl border border-gray-700 backdrop-blur-md hidden">
            <div class="text-[10px] font-mono text-gray-400 mb-2 uppercase tracking-wider border-b border-gray-700 pb-1">Debug: Select Scenario</div>
            <div class="flex gap-2">
                <button onclick="setScenario('reddit')" class="text-xs px-3 py-1.5 bg-gray-700 hover:bg-unsure hover:text-white rounded transition-colors border border-gray-600">Reddit (Unsure)</button>
                <button onclick="setScenario('ai')" class="text-xs px-3 py-1.5 bg-gray-700 hover:bg-ai hover:text-white rounded transition-colors border border-gray-600">Verified AI</button>
                <button onclick="setScenario('human')" class="text-xs px-3 py-1.5 bg-gray-700 hover:bg-human hover:text-white rounded transition-colors border border-gray-600">Verified Human</button>
            </div>
        </div>

    </main>

    <script>
        // --- Navigation & View Switching ---
        function switchView(viewName) {
            // Update Nav State
            document.getElementById('btn-nav-analysis').className = viewName === 'analysis' ? 'px-4 py-1.5 text-xs font-semibold text-white bg-primary rounded shadow-sm transition-colors' : 'px-4 py-1.5 text-xs font-semibold text-secondary hover:text-primary transition-colors hover:bg-white rounded';
            document.getElementById('btn-nav-game').className = viewName === 'game' ? 'px-4 py-1.5 text-xs font-semibold text-white bg-primary rounded shadow-sm transition-colors' : 'px-4 py-1.5 text-xs font-semibold text-secondary hover:text-primary transition-colors hover:bg-white rounded';

            // Toggle Views
            document.getElementById('view-analysis').classList.toggle('hidden', viewName !== 'analysis');
            document.getElementById('view-game').classList.toggle('hidden', viewName !== 'game');
            document.getElementById('dev-controls').classList.toggle('hidden', viewName !== 'game');

            // Resize Charts if switching to Analysis
            if (viewName === 'analysis') {
                setTimeout(() => {
                    chartVerdict.resize();
                    chartTime.resize();
                    chartScatter.resize();
                    chartWordCloud.resize();
                    chartRadar.resize();
                    chartBarStacked.resize();
                    chartSankey.resize();
                }, 100);
            }
        }

        // --- PART 1: GAME LOGIC ---
        const scenarios = {
            'reddit': {
                source: 'reddit', category: 'unsure',
                image: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=988&auto=format&fit=crop',
                stats: { ai: 42, human: 58 },
                comments: [
                    { user: 'u/pixel_peeper', vote: 'ai', text: 'The hands look weird, fingers are <span class="bg-red-50 text-red-600 px-1 font-medium">anatomically incorrect</span>.' },
                    { user: 'u/film_grain', vote: 'human', text: 'Lighting is too natural, looks like <span class="bg-green-50 text-green-600 px-1 font-medium">Portra 400</span> grain structure.' },
                    { user: 'u/mod_bot', vote: 'unsure', text: 'Inconclusive metadata. Perspective lines on the background building seem warped.' }
                ]
            },
            'ai': {
                source: 'internal', category: 'ai',
                image: 'https://images.unsplash.com/photo-1620641788421-7a1c342ea42e?q=80&w=1074&auto=format&fit=crop',
                stats: { ai: 98, human: 2 },
                metadata: { model: 'Midjourney v6.0', prompt: 'A futuristic cyberpunk street view at night, neon lights reflecting on wet pavement, cinematic lighting, photorealistic --ar 16:9' }
            },
            'human': {
                source: 'internal', category: 'human',
                image: 'https://images.unsplash.com/photo-1472214103451-9374bd1c7dd1?q=80&w=1170&auto=format&fit=crop',
                stats: { ai: 12, human: 88 },
                metadata: { author: 'John Doe', location: 'Yosemite National Park', camera: 'Sony A7III, 35mm f/1.4 GM', proofLink: '#' }
            }
        };

        let currentScenarioKey = 'reddit';

        function initGame() { setScenario('reddit'); }

        function setScenario(key) {
            currentScenarioKey = key;
            const data = scenarios[key];
            const imgEl = document.getElementById('main-image');
            imgEl.src = data.image;
            imgEl.classList.remove('blur-state');
            document.getElementById('result-overlay').classList.add('hidden');
            document.getElementById('result-overlay').classList.remove('show-overlay');
            const badge = document.getElementById('source-badge');
            data.source === 'reddit' ? badge.classList.remove('hidden') : badge.classList.add('hidden');
            document.getElementById('bottom-nav').classList.add('hidden');
            renderGuessingState();
        }

        function renderGuessingState() {
            document.getElementById('interaction-content').innerHTML = `
                <div class="flex flex-col h-full justify-center panel-fade-in">
                    <div class="mb-8 text-center">
                        <div class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4 text-2xl">üßê</div>
                        <h3 class="text-lg font-bold text-gray-800 mb-2">Analyze this Image</h3>
                        <p class="text-sm text-gray-500 max-w-xs mx-auto">Look closely at textures, lighting, and anatomical details. What is your verdict?</p>
                    </div>
                    <div class="space-y-3">
                        <button onclick="submitGuess('ai')" class="w-full group relative flex items-center justify-between p-4 bg-white border-2 border-gray-100 hover:border-ai hover:bg-red-50/30 rounded-lg transition-all duration-200"><span class="font-bold text-gray-700 group-hover:text-ai">It's AI Generated</span><span class="text-xl grayscale group-hover:grayscale-0 transition-all">ü§ñ</span></button>
                        <button onclick="submitGuess('human')" class="w-full group relative flex items-center justify-between p-4 bg-white border-2 border-gray-100 hover:border-human hover:bg-blue-50/30 rounded-lg transition-all duration-200"><span class="font-bold text-gray-700 group-hover:text-human">It's Real Photo</span><span class="text-xl grayscale group-hover:grayscale-0 transition-all">üì∑</span></button>
                        <button onclick="submitGuess('unsure')" class="w-full group relative flex items-center justify-between p-4 bg-white border-2 border-gray-100 hover:border-unsure hover:bg-yellow-50/30 rounded-lg transition-all duration-200"><span class="font-bold text-gray-700 group-hover:text-unsure">I'm Unsure / Discuss</span><span class="text-xl grayscale group-hover:grayscale-0 transition-all">ü§î</span></button>
                    </div>
                </div>`;
        }

        function submitGuess(guess) {
            const data = scenarios[currentScenarioKey];
            document.getElementById('main-image').classList.add('blur-state');
            const overlay = document.getElementById('result-overlay');
            overlay.classList.remove('hidden');
            setTimeout(() => overlay.classList.add('show-overlay'), 10);
            
            const aiPct = data.stats.ai;
            document.getElementById('donut-chart').style.background = `conic-gradient(#D9534F 0% ${aiPct}%, #E5E7EB ${aiPct}% 100%)`;
            const donutText = document.getElementById('donut-text');
            const title = document.getElementById('overlay-title');
            
            if (data.category === 'ai') { donutText.textContent = "AI"; donutText.style.color = "#D9534F"; title.textContent = "Result: AI Generated"; title.className = "text-lg font-bold text-ai mb-1"; }
            else if (data.category === 'human') { donutText.textContent = "Real"; donutText.style.color = "#5BC0DE"; title.textContent = "Result: Real Photo"; title.className = "text-lg font-bold text-human mb-1"; }
            else { donutText.textContent = "?"; donutText.style.color = "#F0AD4E"; title.textContent = "Result: Debated"; title.className = "text-lg font-bold text-unsure mb-1"; }
            
            renderResultContent(data);
            document.getElementById('bottom-nav').classList.remove('hidden');
            document.getElementById('bottom-nav').classList.add('flex');
        }

        function renderResultContent(data) {
            const container = document.getElementById('interaction-content');
            let html = `<div class="panel-fade-in pb-4">`;
            if (data.category === 'ai') html += `<div class="mb-6 pb-4 border-b border-gray-100"><div class="text-xs font-bold text-gray-400 uppercase mb-1">Final Verdict</div><div class="text-2xl font-bold text-ai flex items-center gap-2">AI Generated <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg></div></div>`;
            else if (data.category === 'human') html += `<div class="mb-6 pb-4 border-b border-gray-100"><div class="text-xs font-bold text-gray-400 uppercase mb-1">Final Verdict</div><div class="text-2xl font-bold text-human flex items-center gap-2">Real Photograph <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/></svg></div></div>`;
            else html += `<div class="mb-6 pb-4 border-b border-gray-100"><div class="text-xs font-bold text-gray-400 uppercase mb-1">Final Verdict</div><div class="text-2xl font-bold text-unsure flex items-center gap-2">Community Debated <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg></div></div>`;

            if (data.source === 'reddit') {
                html += `<div class="space-y-4"><h4 class="font-bold text-sm text-gray-800">Top Rationales</h4>`;
                data.comments.forEach(c => {
                    const borderClass = c.vote === 'ai' ? 'border-l-ai' : (c.vote === 'human' ? 'border-l-human' : 'border-l-unsure');
                    const badgeClass = c.vote === 'ai' ? 'text-ai bg-red-50' : (c.vote === 'human' ? 'text-human bg-blue-50' : 'text-unsure bg-yellow-50');
                    html += `<div class="pl-3 border-l-4 ${borderClass} py-1"><div class="flex items-center gap-2 mb-1"><span class="text-xs font-bold text-gray-500">${c.user}</span><span class="text-[10px] uppercase font-bold px-1.5 py-0.5 rounded ${badgeClass}">${c.vote}</span></div><p class="text-sm text-gray-700 leading-relaxed">${c.text}</p></div>`;
                });
                html += `</div>`;
            } else if (data.category === 'ai') {
                html += `<div class="bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4"><div class="text-[10px] uppercase font-bold text-gray-400 mb-1">Model Architecture</div><div class="text-sm font-mono text-gray-800">${data.metadata.model}</div></div><div class="bg-gray-50 border border-gray-200 rounded-lg p-4 relative group"><div class="text-[10px] uppercase font-bold text-gray-400 mb-2">Generation Prompt</div><div class="text-sm font-mono text-gray-700 leading-relaxed max-h-32 overflow-y-auto">"${data.metadata.prompt}"</div></div>`;
            } else if (data.category === 'human') {
                html += `<div class="bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4 space-y-3"><div><div class="text-[10px] uppercase font-bold text-gray-400 mb-1">Photographer</div><div class="text-sm font-medium text-gray-800">${data.metadata.author}</div></div><div><div class="text-[10px] uppercase font-bold text-gray-400 mb-1">Context</div><div class="text-sm font-medium text-gray-800">${data.metadata.location}</div></div></div>`;
            }
            html += `</div>`;
            container.innerHTML = html;
        }

        function nextImage() {
            const keys = Object.keys(scenarios);
            const nextIndex = (keys.indexOf(currentScenarioKey) + 1) % keys.length;
            setScenario(keys[nextIndex]);
        }


        // --- PART 2: ANALYSIS CHARTS ---
        // 1.1 Animation
        function animateComments() {
            const comments = document.querySelectorAll('.comment-item');
            let idx = 0;
            setInterval(() => {
                comments.forEach(c => c.classList.remove('active'));
                const annotations = document.querySelectorAll('.annotation-box');
                annotations.forEach(a => a.classList.remove('active'));
                if (comments[idx]) {
                    comments[idx].classList.add('active');
                    if (idx === 0) document.getElementById('anno-hand').classList.add('active');
                    if (idx === 1) document.getElementById('anno-light').classList.add('active');
                }
                idx = (idx + 1) % (comments.length + 1);
            }, 3000);
        }
        function highlight(id) { document.getElementById(id).classList.add('active'); }
        function unhighlight(id) { document.getElementById(id).classList.remove('active'); }

        // Charts
        const chartVerdict = echarts.init(document.getElementById('chart-verdict'));
        chartVerdict.setOption({
            grid: { top: 0, bottom: 20, left: 0, right: 0 },
            xAxis: { type: 'value', show: false, max: 100 },
            yAxis: { type: 'category', show: false, data: ['Verdict'] },
            series: [{ name: 'AI', type: 'bar', stack: 'total', data: [38.7], itemStyle: { color: '#D9534F' }, label: { show: true, formatter: 'AI 39%' } }, { name: 'Human', type: 'bar', stack: 'total', data: [24.9], itemStyle: { color: '#5BC0DE' }, label: { show: true, formatter: 'Real 25%' } }, { name: 'Unsure', type: 'bar', stack: 'total', data: [36.4], itemStyle: { color: '#F0AD4E' }, label: { show: true, formatter: 'Unsure 36%' } }]
        });
        const chartTime = echarts.init(document.getElementById('chart-time'));
        chartTime.setOption({
            tooltip: { trigger: 'axis' }, grid: { top: 10, bottom: 20, left: 30, right: 10 },
            xAxis: { type: 'category', data: ['00','04','08','12','16','20'], axisLine: {lineStyle: {color: '#999'}} },
            yAxis: { type: 'value', splitLine: {lineStyle: {type: 'dashed'}} },
            series: [{ data: [5, 2, 8, 45, 60, 95], type: 'line', smooth: true, areaStyle: { opacity: 0.2 }, itemStyle: { color: '#567C4D' } }]
        });
        const chartScatter = echarts.init(document.getElementById('chart-scatter'));
        chartScatter.setOption({
            tooltip: {}, grid: { top: 10, bottom: 20, left: 30, right: 30 }, xAxis: { name: 'Score', splitLine: {show: false} }, yAxis: { name: 'Comments', splitLine: {show: false} },
            series: [{ name: 'AI', type: 'scatter', data: [[349, 42], [426, 55], [120, 15], [80, 20]], itemStyle: { color: '#D9534F' }, symbolSize: 10 }, { name: 'Real', type: 'scatter', data: [[200, 10], [50, 5], [150, 20]], itemStyle: { color: '#5BC0DE' }, symbolSize: 8 }]
        });
        const chartWordCloud = echarts.init(document.getElementById('chart-wordcloud'));
        chartWordCloud.setOption({
            series: [{ type: 'treemap', width: '100%', height: '100%', roam: false, nodeClick: false, breadcrumb: { show: false }, itemStyle: { gapWidth: 2, borderColor: '#fff' }, data: [{ name: 'Person', value: 36, itemStyle: { color: '#D9534F' } }, { name: 'Poster', value: 12, itemStyle: { color: '#F0AD4E' } }, { name: 'Cat', value: 7, itemStyle: { color: '#D9534F' } }, { name: 'Room', value: 9, itemStyle: { color: '#5BC0DE' } }, { name: 'Hands', value: 22, itemStyle: { color: '#D9534F' } }, { name: 'Texture', value: 15, itemStyle: { color: '#5BC0DE' } }] }]
        });
        const chartRadar = echarts.init(document.getElementById('chart-radar'));
        chartRadar.setOption({
            tooltip: {}, legend: { data: ['AI Verdict', 'Real Verdict'], bottom: 0 },
            radar: { indicator: [{ name: 'Anatomy', max: 30 }, { name: 'Physics', max: 10 }, { name: 'Scene Logic', max: 20 }, { name: 'Ext Knowledge', max: 25 }, { name: 'Art Style', max: 25 }, { name: 'Details', max: 30 }], splitArea: { show: false }, axisLine: { lineStyle: { color: '#999' } } },
            series: [{ type: 'radar', data: [{ value: [25.5, 7.3, 14.9, 10.8, 15.4, 21.7], name: 'AI Verdict', itemStyle: { color: '#D9534F' }, areaStyle: { opacity: 0.3 } }, { value: [11.1, 4.0, 12.5, 21.1, 21.3, 25.4], name: 'Real Verdict', itemStyle: { color: '#5BC0DE' }, areaStyle: { opacity: 0.3 } }] }]
        });
        const chartBarStacked = echarts.init(document.getElementById('chart-bar-stacked'));
        chartBarStacked.setOption({
            tooltip: { trigger: 'axis', axisPointer: { type: 'shadow' } }, legend: { bottom: 0 }, grid: { left: '3%', right: '4%', bottom: '10%', containLabel: true }, xAxis: { type: 'value', boundaryGap: [0, 0.01] }, yAxis: { type: 'category', data: ['Anatomy', 'Style', 'Details'] },
            series: [{ name: 'Used for AI', type: 'bar', data: [381, 231, 325], itemStyle: { color: '#D9534F' } }, { name: 'Used for Real', type: 'bar', data: [85, 163, 195], itemStyle: { color: '#5BC0DE' } }]
        });
        const chartSankey = echarts.init(document.getElementById('chart-sankey'));
        chartSankey.setOption({
            tooltip: { trigger: 'item' },
            series: { type: 'sankey', layout: 'none', emphasis: { focus: 'adjacency' }, data: [{ name: 'Entity: Fingers' }, { name: 'Entity: Eyes' }, { name: 'Entity: Lighting' }, { name: 'Desc: Quantity Anomaly' }, { name: 'Desc: Asymmetrical' }, { name: 'Desc: Natural' }], links: [{ source: 'Entity: Fingers', target: 'Desc: Quantity Anomaly', value: 8 }, { source: 'Entity: Eyes', target: 'Desc: Asymmetrical', value: 6 }, { source: 'Entity: Lighting', target: 'Desc: Natural', value: 4 }], lineStyle: { color: 'gradient', curveness: 0.5 } }
        });

        // 2.2.4 Visual Switch Logic
        function switchVisual(type) {
            document.querySelectorAll('.vis-tab').forEach(b => { b.setAttribute('data-active', 'false'); b.classList.remove('bg-primary', 'text-white', 'border-primary'); });
            const activeBtn = document.getElementById('tab-' + type);
            activeBtn.setAttribute('data-active', 'true');
            activeBtn.classList.add('bg-primary', 'text-white', 'border-primary');
            document.querySelectorAll('.vis-content').forEach(c => { c.classList.add('opacity-0', 'pointer-events-none'); });
            const activeContent = document.getElementById('vis-' + type);
            activeContent.classList.remove('opacity-0', 'pointer-events-none');
        }
        function showCard(id) { document.getElementById(id).classList.remove('hidden'); }
        function hideCard(id) { document.getElementById(id).classList.add('hidden'); }

        window.addEventListener('resize', () => { chartVerdict.resize(); chartTime.resize(); chartScatter.resize(); chartWordCloud.resize(); chartRadar.resize(); chartBarStacked.resize(); chartSankey.resize(); });
        
        // Init
        initGame();
        // animateComments(); 
    </script>
</body>
</html>